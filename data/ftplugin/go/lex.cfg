// Lex for Go
// Last update: 2014-12-01

lex = (
    // Quote
    { id = "comment"; quote = [ "/*", "*/" ]; multi_line = true; },
    { id = "comment"; quote = [ "//" ]; }, // EOL is not escapable.
    { id = "constant.string"; quote = [ "\"", "\"" ]; escape_eol = true; },
    // Raw string.
    { id = "constant.string"; quote = [ "`", "`" ]; multi_line = true; },
    { id = "constant.char"; quote = [ "'", "'" ]; },

    // Anyof
    { id = "constant"; anyof = "iota"; },
    { id = "constant.bool"; anyof = "true false"; },
    { id = "constant.null"; anyof = "nil"; },
    {
        id = "identifier.function";
        anyof = "append cap close complex copy delete imag len "
                "make new panic print println real recover";
    },
    // TODO: func is also a type.
    { id = "statement"; anyof = "func defer go goto return var type"; },
    { id = "statement.package"; anyof = "package import"; },
    { id = "statement.conditional"; anyof = "if else switch case default select"; },
    { id = "statement.repeat"; anyof = "for range break continue fallthrough"; },
    {
        id = "type";
        anyof = "chan map bool string error "
                "int int8 int16 int32 int64 rune "
                "byte uint uint8 uint16 uint32 uint64 uintptr "
                "float32 float64 complex64 complex128";
    },
    { id = "type.qualifier"; anyof = "const"; },
    { id = "type.struct"; anyof = "struct interface"; },

    // Regex
    // ...

    // See: http://golang.org/ref/spec#Integer_literals
    // Order matters!
    { id = "constant.number"; regex = "(\d+\.?|\d+\.\d+)[Ee][\+-]?\d+i?\b"; },
    { id = "constant.number"; regex = "(\d+\.\d+)i?\b"; },
    { id = "constant.number"; regex = "\d+\.i\b"; },
    { id = "constant.number"; regex = "\d+\."; }, // Don't use \b because dot is considered as \b.
    { id = "constant.number"; regex = "0[Xx][[:xdigit:]]+i?\b"; },
    { id = "constant.number"; regex = "0[0-7]+i?\b"; },
    { id = "constant.number"; regex = "[1-9][0-9]*i?\b"; },
    { id = "constant.number"; regex = "0i?\b"; },
    { id = "constant.number"; regex = "\.\d+[Ee][\+-]?\d+i?\b"; },
    { id = "constant.number"; regex = "\.\d+i?\b"; },

    // Prefix
    { id = "identifier.function"; prefix = "func"; },

    // Suffix
    { id = "identifier.function"; suffix = "("; }
);
